{{- if not .Values.existingSecret }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "agentd-secrets.fullname" . }}-secrets
  labels:
    {{- include "agentd-secrets.labels" . | nindent 4 }}
type: Opaque
data: {}
  # Populate via: helm install --set-literal existingSecret=my-secret
  # Or create the secret with agentd-secrets-admin:
  #   bin/agentd-secrets-admin.py create-secret \
  #     --oidc-client-secret '...' \
  #     --oidc-password '...' \
  #     --generate-enc-key
  # Required keys: OIDC_CLIENT_SECRET, WRAPTOKEN_ENC_KEY, OIDC_USERNAME, OIDC_PASSWORD
{{- end }}
